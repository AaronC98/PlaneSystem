<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5. Editing Files &#8212; GPS 19.1 documentation</title>
    
    <link rel="stylesheet" href="_static/adacore.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '19.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. Source Navigation" href="navigation.html" />
    <link rel="prev" title="4. Multiple Document Interface" href="mdi.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="navigation.html" title="6. Source Navigation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mdi.html" title="4. Multiple Document Interface"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GPS 19.1 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/adacore_transparent.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. Editing Files</a><ul>
<li><a class="reference internal" href="#general-information">5.1. General Information</a></li>
<li><a class="reference internal" href="#editing-sources">5.2. Editing Sources</a><ul>
<li><a class="reference internal" href="#key-bindings">5.2.1. Key bindings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#recording-and-replaying-macros">5.3. Recording and replaying macros</a></li>
<li><a class="reference internal" href="#contextual-menus-for-editing-files">5.4. Contextual Menus for Editing Files</a></li>
<li><a class="reference internal" href="#handling-of-casing">5.5. Handling of casing</a></li>
<li><a class="reference internal" href="#refactoring">5.6. Refactoring</a><ul>
<li><a class="reference internal" href="#rename-entity">5.6.1. Rename Entity</a></li>
<li><a class="reference internal" href="#name-parameters">5.6.2. Name Parameters</a></li>
<li><a class="reference internal" href="#extract-subprogram">5.6.3. Extract Subprogram</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-an-external-editor">5.7. Using an External Editor</a></li>
<li><a class="reference internal" href="#using-the-clipboard">5.8. Using the Clipboard</a></li>
<li><a class="reference internal" href="#saving-files">5.9. Saving Files</a></li>
<li><a class="reference internal" href="#printing-files">5.10. Printing Files</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="mdi.html"
                        title="previous chapter">4. Multiple Document Interface</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="navigation.html"
                        title="next chapter">6. Source Navigation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/editing.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="editing-files">
<span id="id1"></span><h1>5. Editing Files<a class="headerlink" href="#editing-files" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general-information">
<span id="index-0"></span><span id="id2"></span><h2>5.1. General Information<a class="headerlink" href="#general-information" title="Permalink to this headline">¶</a></h2>
<p>Source editing is one of the central parts of GPS.  It allows access to
many other functionalities, including extended source navigation and source
analysis tools.  You can have as many editor windows as you need.  Each
editor window receives annotations from other components in GPS, such as a
debugger.</p>
<p>We use the term &#8220;pointer&#8221; to refer to the mouse pointer and &#8220;cursor&#8221; to
refer to the text cursor.</p>
<img alt="_images/source-editor.png" src="_images/source-editor.png" />
<p>The source editor provides an extensive set of features, including:</p>
<p><em>Multi cursors</em></p>
<blockquote>
<div><p>You are not limited to edition via a single cursor in GPS. You can create
multiple cursors that will all forward the text actions that you enter via
your keyboard. This allows you to automate simple repetitive actions, in
a similar way to what you would do with text macros, but in a simpler
fashion.</p>
<p>Most of the text actions described in this documentation will be handled
transparently by multi cursors, so you can delete several words at once, or
select several pieces of text at once, for example.</p>
<p>At any time during edition with multiple cursors, you can press <code class="kbd docutils literal"><span class="pre">Escape</span></code>
to remove every cursor but the main one, so that you are back to single
cursor edition. Using the mouse to move the cursor will have the same effect.</p>
</div></blockquote>
<p><em>Title bar</em></p>
<blockquote>
<div>Displays the full name of the file including path information in the
title bar of the editor window.</div></blockquote>
<p><em>Line number information</em></p>
<blockquote>
<div>Located to the left of the source editor, <span class="target" id="index-1"></span>Line numbers can be disabled using the
<span class="menuselection">Editor ‣ Display line numbers</span> preference.  This area
also displays additional information in some cases, such as the current
line of execution when debugging or VCS annotations.</div></blockquote>
<p><em>Scrollbar</em></p>
<blockquote>
<div>Located to the right of the editor, this allows scrolling through the
source file.  The highlighted area of the scrollbar corresponds to the
visible portion of the file.  While you are scrolling, the editor
displays a tooltip showing the file, line number, and subprogram
corresponding to the center of the visible portion.</div></blockquote>
<p><em>Speed column</em></p>
<blockquote>
<div>This <span class="target" id="index-2"></span>column, when visible, is located on the left of the editor. It allows
you to view all the highlighted lines in a file at a glance. For example,
all the lines containing compilation errors are displayed in the
<span class="guilabel">Speed Column</span>. Use the <span class="menuselection">Editor ‣ Speed column
policy</span> preference to control the display of this area. It can sometimes
be convenient to keep it visible at all times (to avoid resizing the
editors when new information becomes available) or to hide it
automatically when not needed to save space on the screen.</div></blockquote>
<p><em>Status bar</em></p>
<blockquote>
<div><p>Gives information about the file. It is divided in two sections, one each
on the left and right of the window.</p>
<ul>
<li><p class="first">The left part of the status bar shows the current <span class="target" id="index-3"></span>subprogram name for
languages that support this capability. Currently Ada, C, and C++
have this ability. The <span class="menuselection">Editor ‣ Display subprogram
names</span> preference controls this display.</p>
</li>
<li><p class="first">The right section contains multiple items:</p>
<ul>
<li><p class="first">The box displays the position of the cursor in the file as a line and
column number. When you have made a selection in the editor, this area
also displays the size of the selection (number of lines and
characters).</p>
</li>
<li><p class="first">Next to the box is an icon showing whether the file is writable or
read only.  Change this state by clicking on the icon, which toggles
between <span class="guilabel">Writable</span> and <span class="guilabel">Read Only</span>.  This does not
change the permissions of the file on disk: it only changes the
writability of the view in the source editor.</p>
<p>When you try to save a read-only file, GPS asks for confirmation, and
if possible, saves the file, keeping its read-only state.</p>
</li>
<li><p class="first">If the file is maintained under version control and version control
is supported and enabled in GPS, the next icon shows VCS information
for the file: the VCS kind (e.g. CVS or subversion) followed by the
revision number and, if available, the file&#8217;s status.</p>
</li>
</ul>
</li>
</ul>
</div></blockquote>
<p><em>Contextual menu</em></p>
<blockquote>
<div>Displayed when you right-click on any area of the source editor.  See in
particular <span class="xref std std-ref">Contextual_Menus_for_Source_Navigation</span> for more details.</div></blockquote>
<p><em>Syntax highlighting</em></p>
<blockquote>
<div><p>Based on the programming language associated with the file, reserved
words and languages constructs such as comments and strings are
highlighted in different colors and fonts.</p>
<p>By default, GPS knows about many languages. You can also easily add
support for other languages through plugins. Most languages supported by
GPS provide syntax highlighting in the editor.</p>
</div></blockquote>
<p><em>Automatic indentation</em></p>
<blockquote>
<div><p>When enabled, lines are automatically <span class="target" id="index-4"></span>indented
each time you press the <code class="kbd docutils literal"><span class="pre">Enter</span></code> key or the indentation key, which,
by default, is <code class="kbd docutils literal"><span class="pre">Tab</span></code>.  Change it in the key manager dialog.  See
<a class="reference internal" href="extending.html#the-key-shortcuts-editor"><span class="std std-ref">The Key Shortcuts Editor</span></a>.</p>
<p>If you have selected a list of lines when you press the indentation key,
GPS indents all the lines.</p>
</div></blockquote>
<p><em>Tooltips</em></p>
<blockquote>
<div><p>When you place the pointer over a word in the source editor, GPS displays
a small <span class="target" id="index-5"></span>window if there is relevant contextual
information to display about that word.  The type of information
displayed depends on the current state of GPS.</p>
<p>In normal mode, the editor displays the entity kind and location of the
declaration when this information is available, i.e., when the
cross-reference information about the current file has been generated. If
there is no relevant information, no tooltip is displayed.  See
<a class="reference internal" href="navigation.html#support-for-cross-references"><span class="std std-ref">Support for Cross-References</span></a> for more information.</p>
<p>In addition, the editor displays documentation for the entity, if
available.  This is the block of comments immediately before or after the
entity&#8217;s declaration (without any intervening blank lines). For example,
the editor displays the following documentation for Ada:</p>
<div class="highlight-ada"><div class="highlight"><pre><span></span><span class="c1">--  A comment for A</span>
<span class="n">A</span> <span class="p">:</span> <span class="kt">Integer</span><span class="p">;</span>

<span class="n">B</span> <span class="p">:</span> <span class="kt">Integer</span><span class="p">;</span>
<span class="c1">--  A comment for B</span>

<span class="n">C</span> <span class="p">:</span> <span class="kt">Integer</span><span class="p">;</span>

<span class="c1">--  Not a comment for C, there is a blank line</span>
</pre></div>
</div>
<p>When comments appear both before and after the entity, GPS chooses the one
given by the <span class="target" id="index-6"></span>preference <span class="menuselection">Documentation ‣ Leading documentation</span>.
In debugging mode, the editor shows the value of the variable under the
pointer if the variable is known to the debugger.</p>
<p>Disable the automatic pop up of tool tips via the <span class="target" id="index-7"></span>preference <span class="menuselection">Editor ‣ Tooltips</span>.</p>
</div></blockquote>
<p><em>Code completion</em></p>
<blockquote>
<div><p>GPS provides two kinds of code <span class="target" id="index-8"></span>completion: a <span class="xref std std-ref">smart code
completion</span>, based on semantic information, and a text
completion.</p>
<p>Text completion is useful when editing a file using the same words
repeatedly where it provides automatic word completion.  When you type
the <code class="kbd docutils literal"><span class="pre">Ctrl-/</span></code> key combination (customizable through the key manager
dialog) after a partial word, GPS inserts the next potential completion.
Typing this key again cycles through the list of potential completions.
GPS searches for text completions in all currently open files.</p>
</div></blockquote>
<p><em>Delimiter highlighting</em></p>
<blockquote>
<div><p>When the cursor is placed before an opening <span class="target" id="index-9"></span>delimiter or after a
closing delimiter, GPS highlights both delimiters.  The following
characters are considered delimiters: ()[]{}.  Disable highlighting of
delimiters with the <span class="target" id="index-10"></span>preference <span class="menuselection">Editor ‣ Highlight delimiters</span>.</p>
<p>Jump to a corresponding delimiter by invoking the <span class="menuselection">jump to
matching delimiter</span> action (which can be bound to a key in the key
shortcuts editor).  Invoking this action a second time returns the cursor
to its original position.</p>
</div></blockquote>
<p><em>Current line highlighting</em></p>
<blockquote>
<div>Configure the editor to highlight the <span class="target" id="index-11"></span>current line with a
specified color (see the <span class="target" id="index-12"></span>preference <span class="menuselection">Editor ‣ Fonts
&amp; Colors ‣ Current line color</span>).</div></blockquote>
<p><em>Current block highlighting</em></p>
<blockquote>
<div><p>If the <span class="target" id="index-13"></span>preference
<span class="menuselection">Editor ‣ Block highlighting</span> is enabled, GPS highlights
the current block of code, e.g. the current <strong class="command">begin...end</strong> block
or loop statement, by placing a vertical bar to its left.</p>
<p>Block highlighting also takes into account the changes made in your
source code and is recomputed to determine the current block when needed.
This capability is currently implemented for the Ada, C, and C++
languages.</p>
</div></blockquote>
<p><em>Block folding</em></p>
<blockquote>
<div><p>When the <span class="target" id="index-14"></span>preference
<span class="menuselection">Editor ‣ Block folding</span> is enabled, GPS displays
<code class="samp docutils literal"><span class="pre">-</span></code> icons on the left side corresponding to the beginning of each
block. If you click on one of these icons, all lines corresponding to
this block are hidden except the first.  Like block highlighting, these
icons are recomputed automatically when you modify your sources.</p>
<p>This capability is currently implemented for Ada, C, and C++ languages.</p>
</div></blockquote>
<p><em>Auto save</em></p>
<blockquote>
<div>GPS will by default periodically save your work in temporary files. This
can be configured via the <span class="menuselection">Edit ‣ Preferences...</span> dialog).</div></blockquote>
<p><em>Automatic highlighting of entities</em></p>
<blockquote>
<div><p>When the pointer is positioned on an entity in the source editor, GPS
will highlight all references to this entity in the current editor.  When
the pointer is moved away from the entity, the highlighting is removed.</p>
<p id="index-15">This is controlled by the plugin <code class="file docutils literal"><span class="pre">auto_highlight_occurrences.py</span></code>:
it can be deactivated by disabling the plugin.</p>
<p>Details such as the presence of indications in the <span class="guilabel">Speed Column</span> or
highlighting color can be customized in the <span class="guilabel">Plugins</span> section
of <span class="menuselection">Edit ‣ Preferences...</span> dialog.</p>
</div></blockquote>
<p id="index-16">GPS also integrates with existing third party editors such as
<strong class="program">emacs</strong> or <strong class="program">vi</strong>.  See <a class="reference internal" href="#using-an-external-editor"><span class="std std-ref">Using an External Editor</span></a>.</p>
<span class="target" id="index-17"></span></div>
<div class="section" id="editing-sources">
<span id="index-18"></span><span id="id3"></span><h2>5.2. Editing Sources<a class="headerlink" href="#editing-sources" title="Permalink to this headline">¶</a></h2>
<div class="section" id="key-bindings">
<span id="index-19"></span><h3>5.2.1. Key bindings<a class="headerlink" href="#key-bindings" title="Permalink to this headline">¶</a></h3>
<p>In addition to the standard keys used to navigate in the editor (up, down,
right, left, page up, page down), the integrated editor provides a number of
key bindings allowing easy navigation in the file.</p>
<p>There are also several ways to define new key bindings, see
<a class="reference internal" href="extending.html#defining-text-aliases"><span class="std std-ref">Defining text aliases</span></a> and <a class="reference internal" href="extending.html#binding-actions-to-keys"><span class="std std-ref">Binding actions to keys</span></a>.</p>
<span class="target" id="index-20"></span><table border="1" class="docutils" id="index-21">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Ctrl-Shift-u</span></code></td>
<td>Pressing these three keys and then holding Ctrl-Shift allow you to enter
characters using their hexadecimal value. For example, pressing</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">Ctrl-Shift-u-2-0</span></code></td>
<td>will insert a space character (ASCII 32, which is 20 in hexadecimal).</td>
</tr>
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Ctrl-x</span></code>
<code class="kbd docutils literal"><span class="pre">Shift-delete</span></code></td>
<td>Cut to clipboard.</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">Ctrl-c</span></code>
<code class="kbd docutils literal"><span class="pre">Ctrl-insert</span></code></td>
<td>Copy to clipboard.</td>
</tr>
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Ctrl-v</span></code>
<code class="kbd docutils literal"><span class="pre">Shift-insert</span></code></td>
<td>Paste from clipboard.</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">Ctrl-s</span></code></td>
<td>Save file to disk.</td>
</tr>
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Ctrl-z</span></code></td>
<td>Undo previous insertion/deletion.</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">Ctrl-r</span></code></td>
<td>Redo previous insertion/deletion.</td>
</tr>
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Insert</span></code></td>
<td>Toggle overwrite mode.</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">Ctrl-a</span></code></td>
<td>Select the whole file.</td>
</tr>
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Home</span></code>
<code class="kbd docutils literal"><span class="pre">Ctrl-Pgup</span></code></td>
<td>Go to the beginning of the line.</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">End</span></code>
<code class="kbd docutils literal"><span class="pre">Ctrl-Pgdown</span></code></td>
<td>Go to the end of the line.</td>
</tr>
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Ctrl-Home</span></code></td>
<td>Go to the beginning of the file.</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">Ctrl-End</span></code></td>
<td>Go to the end of the file.</td>
</tr>
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Ctrl-up</span></code></td>
<td>Go to the beginning of the line or to the previous line if already at
the beginning of the line.</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">Ctrl-down</span></code></td>
<td>Go to the end of the line or to the beginning of the next line if
already at the end of the line.</td>
</tr>
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Ctrl-delete</span></code></td>
<td>Delete to the end of the current word.</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">Ctrl-backspace</span></code></td>
<td>Delete to the beginning of the current word.</td>
</tr>
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Shift-Alt-down</span></code></td>
<td>Add a cursor to the current location and go down one line</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">Shift-Alt-up</span></code></td>
<td>Add a cursor to the current location and go up one line</td>
</tr>
<tr class="row-odd"><td><code class="kbd docutils literal"><span class="pre">Ctrl-Alt-N</span></code></td>
<td>jump the main cursor to the next occurrence of the selection</td>
</tr>
<tr class="row-even"><td><code class="kbd docutils literal"><span class="pre">Shift-Ctrl-N</span></code></td>
<td>Add a cursor selecting the current selection and jump the main cursor to
the next occurrence of the selection</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="recording-and-replaying-macros">
<span id="index-22"></span><span id="id4"></span><h2>5.3. Recording and replaying macros<a class="headerlink" href="#recording-and-replaying-macros" title="Permalink to this headline">¶</a></h2>
<p>It is often convenient to be able to repeat a given key sequence a number of
times.</p>
<p>GPS supports this with several different methods:</p>
<ul>
<li><p class="first">Repeat the next action</p>
<p id="index-23">If you want to repeat the action of pressing a single key, first use the
GPS action <span class="guilabel">Repeat Next</span> (bound by default to <code class="kbd docutils literal"><span class="pre">control-u</span></code>,
but this can be changed as usual through the
<span class="menuselection">Edit ‣ Preferences...</span> menu), entering the number of
times you wish to repeat, and then pressing the key whose action you want
to repeat.</p>
<p>For example, the sequence <code class="kbd docutils literal"><span class="pre">control-u</span> <span class="pre">79</span> <span class="pre">-</span></code> inserts 79 characters of
&#8216;-&#8216; in the current editor.  This is often useful to insert separators.</p>
<p>If you are using the Emacs mode, you can also use the sequence
<code class="kbd docutils literal"><span class="pre">control-u</span> <span class="pre">30</span> <span class="pre">control-k</span></code> to delete 30 lines.</p>
</li>
<li><p class="first">Recording macros</p>
<p>To repeat a sequence of more than 1 key, record the sequence as a
macro. All macro-related actions are found in the Key Shortcuts section of
the preferences dialog.</p>
<p>First, tell GPS that it should start recording the keys you are pressing via
the <span class="menuselection">Macro Start Keyboard</span> action.  This only records
keyboard events, not mouse events. GPS keeps recording the events until you
select call the <span class="menuselection">Macro Stop</span> action.</p>
<p>In Emacs mode, macro actions are bound to <code class="kbd docutils literal"><span class="pre">control-x</span> <span class="pre">(</span></code>,
<code class="kbd docutils literal"><span class="pre">control-x</span> <span class="pre">)</span></code> and <code class="kbd docutils literal"><span class="pre">control-x</span> <span class="pre">e</span></code> key shortcuts. For example, you
can execute the following to create a very simple macro that deletes the
current line wherever your cursor initially is on that line:</p>
<ul class="simple">
<li><code class="kbd docutils literal"><span class="pre">control-x</span> <span class="pre">(</span></code>     start recording</li>
<li><code class="kbd docutils literal"><span class="pre">control-a</span></code>      go to beginning of line</li>
<li><code class="kbd docutils literal"><span class="pre">control-k</span></code>      delete line</li>
<li><code class="kbd docutils literal"><span class="pre">control-x</span> <span class="pre">)</span></code>     stop recording</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="contextual-menus-for-editing-files">
<span id="index-24"></span><span id="id5"></span><h2>5.4. Contextual Menus for Editing Files<a class="headerlink" href="#contextual-menus-for-editing-files" title="Permalink to this headline">¶</a></h2>
<p>Whenever you ask for a contextual menu (using, for example, the right
button on your mouse) on a source file, you get access to a number of
entries, which are displayed or hidden depending on the current context.</p>
<p>These menu entries include the following categories:</p>
<p><em>Source Navigation</em></p>
<blockquote>
<div>See <span class="xref std std-ref">Contextual_Menus_for_Source_Navigation</span>.</div></blockquote>
<p><em>Dependencies</em></p>
<blockquote>
<div>See <a class="reference internal" href="main_window.html#the-dependency-browser"><span class="std std-ref">The Dependency Browser</span></a>.</div></blockquote>
<p><em>Entity browsing</em></p>
<blockquote>
<div>See <a class="reference internal" href="main_window.html#entity-browser"><span class="std std-ref">The Entity browser</span></a>.</div></blockquote>
<p><em>Project view</em></p>
<blockquote>
<div>See <a class="reference internal" href="main_window.html#the-project-view"><span class="std std-ref">The Project view</span></a>.</div></blockquote>
<p><em>Debugger</em></p>
<blockquote>
<div>See <a class="reference internal" href="debugging.html#using-the-source-editor-when-debugging"><span class="std std-ref">Using the Source Editor when Debugging</span></a>.</div></blockquote>
<p><em>Case exceptions</em></p>
<blockquote>
<div>See <a class="reference internal" href="#handling-of-case-exceptions"><span class="std std-ref">Handling of casing</span></a>.</div></blockquote>
<p><em>Refactoring</em></p>
<blockquote>
<div>See <a class="reference internal" href="#refactoring"><span class="std std-ref">Refactoring</span></a>.</div></blockquote>
<span class="target" id="index-25"></span><p id="index-26">In addition, an entry <span class="menuselection">Properties...</span> is always visible in
this contextual menu. When you select it, a dialog allows you to override
the language or the character set used for the file.  This is useful when
opening a file that does not belong to the current project but where you
want to benefit from the syntax highlighting, which depends on knowing the
file&#8217;s language.</p>
<p>Do not override the language for source files belonging to the current
project. Instead, use the <span class="menuselection">Edit ‣ Project
Properties</span> menu and change the naming scheme as appropriate. This provides
better consistency between GPS and the compiler in the way they manipulate
the file.</p>
</div>
<div class="section" id="handling-of-casing">
<span id="handling-of-case-exceptions"></span><span id="index-27"></span><h2>5.5. Handling of casing<a class="headerlink" href="#handling-of-casing" title="Permalink to this headline">¶</a></h2>
<p>GPS maintains a dictionary of identifiers and a corresponding casing that
are used by all case-insensitive languages. When editing or reformatting a
buffer for such a language, the dictionary is checked first. If GPS finds
an entry for a word or a substring of a word, it is used; otherwise the
specified default casing for keywords or identifiers is used. A substring
is defined as a part of the word separated by underscores.</p>
<span class="target" id="index-28"></span><span class="target" id="index-29"></span><p id="index-30">This feature is not activated for entities (keywords or identifiers) for
which the casing is set to <span class="guilabel">Unchanged</span> in the
<span class="menuselection">Editor ‣ Ada ‣ Reserved word casing</span> or
<span class="menuselection">Editor ‣ Ada ‣ Identifier casing</span> preferences.</p>
<p>A contextual menu named <span class="menuselection">Casing</span> has the following entries:</p>
<ul>
<li><p class="first"><span class="menuselection">Casing ‣ Lower *entity*</span></p>
<p>Set the selected entity to be in lower case.</p>
</li>
<li><p class="first"><span class="menuselection">Casing ‣ Upper *entity*</span></p>
<p>Set the selected entity to be in upper case.</p>
</li>
<li><p class="first"><span class="menuselection">Casing ‣ Mixed *entity*</span></p>
<p>Set the selected entity to be in mixed case (the first letter and letters
before an underscore are in upper case and all other letters are in lower
case).</p>
</li>
<li><p class="first"><span class="menuselection">Casing ‣ Smart Mixed *entity*</span></p>
<p>Set the selected entity as smart mixed case, which is the same as above
except that upper case letters are kept unchanged.</p>
</li>
<li><p class="first"><span class="menuselection">Casing ‣ Add exception for *entity*</span></p>
<p>Add the current entity into the dictionary.</p>
</li>
<li><p class="first"><span class="menuselection">Casing ‣ Remove exception for *entity*</span></p>
<p>Remove the current entity from the dictionary.</p>
</li>
</ul>
<p>To add or remove a substring from the dictionary, first select the
substring in the editor.  Then, the last two contextual menu entries will
be:</p>
<ul>
<li><p class="first"><span class="menuselection">Casing ‣ Add substring exception for *str*</span></p>
<p>Add the selected substring into the dictionary.</p>
</li>
<li><p class="first"><span class="menuselection">Casing ‣ Remove substring exception for *str*</span></p>
<p>Remove the selected substring from the dictionary.</p>
</li>
</ul>
</div>
<div class="section" id="refactoring">
<span id="index-31"></span><span id="id6"></span><h2>5.6. Refactoring<a class="headerlink" href="#refactoring" title="Permalink to this headline">¶</a></h2>
<p>GPS includes basic facilities to refactor your code.  &#8220;Refactoring&#8221; is the
term used to describe manipulation of source code that does not affect the
behavior of the code but helps reorganize it to make it more readable, more
extendable, or make other similar improvements.  Refactoring techniques are
generally things that programmers have done by hand, but which can be done
faster and more securely when done automatically by a tool.</p>
<p>A basic recommendation when you refactor your code is to recompile and
test your application regularly to make sure each small modification you
made did not change the behavior of your application.  This is particularly
true with GPS, since it relies on the cross-references information
generated by the compiler. If some source files have not been recompiled
recently, GPS prints warning messages indicating that the operation might
be dangerous and/or only partially performed.</p>
<p>One of the reference books used in the choice of refactoring methods for
GPS is &#8220;Refactoring&#8221;, by Martin Fowler (Addison Wesley).</p>
<div class="section" id="rename-entity">
<span id="id7"></span><h3>5.6.1. Rename Entity<a class="headerlink" href="#rename-entity" title="Permalink to this headline">¶</a></h3>
<p>Clicking on an entity in a source file and selecting the
<span class="menuselection">Refactoring ‣ Rename</span> contextual menu opens a dialog
asking for the new name of the entity. GPS renames all instances of the
entity in your application, including the definition of the entity, its
body, and all calls to it.  No comments are updated so you should probably
manually check that the comment for the entity still applies.</p>
<p>GPS handles primitive operations by also renaming the operations it
overrides or that override it, so any dispatching call to that operation
is also renamed, allowing the application to continue to work properly. If
you are renaming a parameter to a subprogram, GPS also renames parameters
with the same name in overriding or overridden subprograms.</p>
<p>You can specify the behavior for read-only files: by default, GPS will not do
any refactoring in these files and instead displays a dialog listing them.
However, you can choose to make them writable just as if you had clicked on
the <span class="guilabel">Read-Only</span> button in the status bar of the editor and have
GPS perform the renaming in them as well.</p>
</div>
<div class="section" id="name-parameters">
<span id="id8"></span><h3>5.6.2. Name Parameters<a class="headerlink" href="#name-parameters" title="Permalink to this headline">¶</a></h3>
<p>If you are editing Ada code and click on a call to a subprogram, GPS
displays a <span class="menuselection">Refactoring ‣ Name parameters</span> contextual
menu, which replaces all unnamed parameters by named parameters, for
example:</p>
<div class="highlight-ada"><div class="highlight"><pre><span></span>   <span class="n">Call</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">=&gt;</span>
   <span class="n">Call</span> <span class="p">(</span><span class="n">Param1</span> <span class="p">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Param2</span> <span class="p">=&gt;</span> <span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="extract-subprogram">
<span id="id9"></span><h3>5.6.3. Extract Subprogram<a class="headerlink" href="#extract-subprogram" title="Permalink to this headline">¶</a></h3>
<p>This refactoring moves some code into a separate subprogram to simplify the
original subprogram by moving part of its code elsewhere.  Here is an
example from the &#8220;Refactoring&#8221; book. The refactoring takes place in the
body of the package <code class="file docutils literal"><span class="pre">pkg.adb</span></code>, but the spec is needed so you can
compile the source code (a preliminary, but mandatory, step before you can
refactor the code):</p>
<div class="highlight-ada"><div class="highlight"><pre><span></span><span class="kr">pragma</span> <span class="cp">Ada_05</span><span class="p">;</span>

<span class="kn">with</span> <span class="nn">Ada.Containers.Indefinite_Doubly_Linked_Lists</span><span class="p">;</span>
<span class="kn">with</span> <span class="nn">Ada.Strings.Unbounded</span><span class="p">;</span>

<span class="kd">package</span> <span class="nc">Pkg</span> <span class="kr">is</span>

   <span class="kd">type</span> <span class="kt">Order</span> <span class="kr">is</span> <span class="kr">tagged</span> <span class="kr">null record</span><span class="p">;</span>
   <span class="kd">function</span> <span class="nf">Get_Amount</span> <span class="p">(</span><span class="nv">Self</span> <span class="p">: </span><span class="nv">Order</span><span class="p">)</span> <span class="kr">return</span> <span class="kt">Integer</span><span class="p">;</span>

   <span class="kd">package</span> <span class="nc">Order_Lists</span> <span class="kr">is new</span>
      <span class="nc">Ada.Containers.Indefinite_Doubly_Linked_Lists</span> <span class="p">(</span>Order<span class="p">);</span>

   <span class="kd">type</span> <span class="kt">Invoice</span> <span class="kr">is</span> <span class="kr">tagged</span> <span class="kr">record</span>
      <span class="n">Orders</span> <span class="p">:</span> <span class="n">Order_Lists</span><span class="p">.</span><span class="n">List</span><span class="p">;</span>
      <span class="n">Name</span>   <span class="p">:</span> <span class="n">Ada</span><span class="p">.</span><span class="n">Strings</span><span class="p">.</span><span class="n">Unbounded</span><span class="p">.</span><span class="n">Unbounded_String</span><span class="p">;</span>
   <span class="kr">end record</span><span class="p">;</span>

   <span class="kd">procedure</span> <span class="nf">Print_Owing</span> <span class="p">(</span><span class="nv">Self</span> <span class="p">: </span><span class="nv">Invoice</span><span class="p">);</span>

<span class="kr">end</span> <span class="nf">Pkg</span><span class="p">;</span>
</pre></div>
</div>
<p>An initial implementation for this is the following:</p>
<div class="highlight-ada"><div class="highlight"><pre><span></span><span class="kr">pragma</span> <span class="cp">Ada_05</span><span class="p">;</span>
<span class="kn">with</span> <span class="nn">Ada.Strings.Unbounded</span><span class="p">;</span>  <span class="kn">use</span> <span class="nn">Ada.Strings.Unbounded</span><span class="p">;</span>
<span class="kn">with</span> <span class="nn">Ada.Text_IO</span><span class="p">;</span>            <span class="kn">use</span> <span class="nn">Ada.Text_IO</span><span class="p">;</span>

<span class="kd">package</span> <span class="kd">body</span> <span class="nc">Pkg</span> <span class="kr">is</span>
   <span class="kn">use</span> <span class="nn">Order_Lists</span><span class="p">;</span>

   <span class="c1">----------------</span>
   <span class="c1">-- Get_Amount --</span>
   <span class="c1">----------------</span>

   <span class="kd">function</span> <span class="nf">Get_Amount</span> <span class="p">(</span><span class="nv">Self</span> <span class="p">: </span><span class="nv">Order</span><span class="p">)</span> <span class="kr">return</span> <span class="kt">Integer</span> <span class="kr">is</span>
   <span class="kr">begin</span>
      <span class="kr">return</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kr">end</span> <span class="nf">Get_Amount</span><span class="p">;</span>

   <span class="c1">-----------------</span>
   <span class="c1">-- Print_Owing --</span>
   <span class="c1">-----------------</span>

   <span class="kd">procedure</span> <span class="nf">Print_Owing</span> <span class="p">(</span><span class="nv">Self</span> <span class="p">: </span><span class="nv">Invoice</span><span class="p">)</span> <span class="kr">is</span>
      <span class="n">E</span> <span class="p">:</span> <span class="n">Order_Lists</span><span class="p">.</span><span class="kt">Cursor</span> <span class="p">:=</span> <span class="n">First</span> <span class="p">(</span><span class="n">Self</span><span class="p">.</span><span class="n">Orders</span><span class="p">);</span>
      <span class="n">Outstanding</span> <span class="p">:</span> <span class="kt">Natural</span> <span class="p">:=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="n">Each</span> <span class="p">:</span> <span class="n">Order</span><span class="p">;</span>
   <span class="kr">begin</span>
      <span class="c1">--  &lt;&lt;&lt; line 30</span>
      <span class="c1">--  Print Banner</span>

      <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
      <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot; Customer Owes         &quot;</span><span class="p">);</span>
      <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>  <span class="c1">--  &lt;&lt; line 35</span>

      <span class="c1">--  Calculate Outstanding</span>

      <span class="kr">while</span> <span class="n">Has_Element</span> <span class="p">(</span><span class="n">E</span><span class="p">)</span> <span class="kr">loop</span>
         <span class="n">Each</span> <span class="p">:=</span> <span class="n">Element</span> <span class="p">(</span><span class="n">E</span><span class="p">);</span>
         <span class="n">Outstanding</span> <span class="p">:=</span> <span class="n">Outstanding</span> <span class="o">+</span> <span class="n">Each</span><span class="p">.</span><span class="n">Get_Amount</span><span class="p">;</span>
         <span class="n">Next</span> <span class="p">(</span><span class="n">E</span><span class="p">);</span>
      <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>

      <span class="c1">--  Print Details</span>

      <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot;Name: &quot;</span> <span class="o">&amp;</span> <span class="n">To_String</span> <span class="p">(</span><span class="n">Self</span><span class="p">.</span><span class="n">Name</span><span class="p">));</span>
      <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot;Outstanding:&quot;</span> <span class="o">&amp;</span> <span class="n">Outstanding</span><span class="p">&#39;</span><span class="na">Img</span><span class="p">);</span>
   <span class="kr">end</span> <span class="nf">Print_Owing</span><span class="p">;</span>
<span class="kr">end</span> <span class="nf">Pkg</span><span class="p">;</span>
</pre></div>
</div>
<p>Suppose we feel the procedure <strong class="command">Print_Owing</strong> is too long and does
several independent actions.  We will perform a series of three successive
refactoring steps to extract the code and move it elsewhere.</p>
<p>First, we move the code that prints the banner. Moving it is easy, since
this code does not depend on any context. We could just do a copy-paste,
but then we would have to create the new subprogram. Instead, we select lines
30 to 35 and then select the <span class="menuselection">Refactoring ‣ Extract
Subprogram</span> contextual menu.  GPS removes those lines from the subprogram
<strong class="command">Print_Owing</strong> and creates a new procedure <strong class="command">Print_Banner</strong>
(the name is specified by the user; GPS does not try to guess a name). Also,
since the chunk of code that is extracted starts with a comment, GPS
automatically uses that comment as the documentation for the new
subprogram.  Here is the relevant part of the resulting file:</p>
<div class="highlight-ada"><div class="highlight"><pre><span></span><span class="kd">package</span> <span class="kd">body</span> <span class="nc">Pkg</span> <span class="kr">is</span>

   <span class="kd">procedure</span> <span class="nf">Print_Banner</span><span class="p">;</span>
   <span class="c1">--  Print Banner</span>

   <span class="c1">------------------</span>
   <span class="c1">-- Print_Banner --</span>
   <span class="c1">------------------</span>

   <span class="kd">procedure</span> <span class="nf">Print_Banner</span> <span class="kr">is</span>
   <span class="kr">begin</span>
      <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
      <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot; Customer Owes         &quot;</span><span class="p">);</span>
      <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
   <span class="kr">end</span> <span class="nf">Print_Banner</span><span class="p">;</span>

   <span class="p">...</span> <span class="p">(</span><span class="n">code</span> <span class="ow">not</span> <span class="n">shown</span><span class="p">)</span>

   <span class="kd">procedure</span> <span class="nf">Print_Owing</span> <span class="p">(</span><span class="nv">Self</span> <span class="p">: </span><span class="nv">Invoice</span><span class="p">)</span> <span class="kr">is</span>
      <span class="n">E</span> <span class="p">:</span> <span class="n">Order_Lists</span><span class="p">.</span><span class="kt">Cursor</span> <span class="p">:=</span> <span class="n">First</span> <span class="p">(</span><span class="n">Self</span><span class="p">.</span><span class="n">Orders</span><span class="p">);</span>
      <span class="n">Outstanding</span> <span class="p">:</span> <span class="kt">Natural</span> <span class="p">:=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="n">Each</span> <span class="p">:</span> <span class="n">Order</span><span class="p">;</span>
   <span class="kr">begin</span>
      <span class="n">Print_Banner</span><span class="p">;</span>

      <span class="c1">--  Calculate Outstanding</span>

      <span class="kr">while</span> <span class="n">Has_Element</span> <span class="p">(</span><span class="n">E</span><span class="p">)</span> <span class="kr">loop</span>
         <span class="n">Each</span> <span class="p">:=</span> <span class="n">Element</span> <span class="p">(</span><span class="n">E</span><span class="p">);</span>
         <span class="n">Outstanding</span> <span class="p">:=</span> <span class="n">Outstanding</span> <span class="o">+</span> <span class="n">Each</span><span class="p">.</span><span class="n">Get_Amount</span><span class="p">;</span>
         <span class="n">Next</span> <span class="p">(</span><span class="n">E</span><span class="p">);</span>
      <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>

      <span class="c1">--  Print Details   &lt;&lt;&lt; line  54</span>

      <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot;Name: &quot;</span> <span class="o">&amp;</span> <span class="n">To_String</span> <span class="p">(</span><span class="n">Self</span><span class="p">.</span><span class="n">Name</span><span class="p">));</span>
      <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot;Outstanding:&quot;</span> <span class="o">&amp;</span> <span class="n">Outstanding</span><span class="p">&#39;</span><span class="na">Img</span><span class="p">);</span>  <span class="c1">--  line 57</span>
   <span class="kr">end</span> <span class="nf">Print_Owing</span><span class="p">;</span>
<span class="kr">end</span> <span class="nf">Pkg</span><span class="p">;</span>
</pre></div>
</div>
<p>A more interesting example is when we want to extract the code to print the
details of the invoice. This code depends on one local variable and the
parameter to <strong class="command">Print_Owing</strong>.  When we select lines 54 to 57 and
extract it into a new <strong class="command">Print_Details</strong> subprogram, GPS
automatically decides which variables to extract and whether they should
become parameters of the new subprogram or local variables. In the former
case, it also automatically decides whether to create <code class="samp docutils literal"><span class="pre">in</span></code>,
<code class="samp docutils literal"><span class="pre">out</span></code> or <code class="samp docutils literal"><span class="pre">in</span> <span class="pre">out</span></code> parameters. If there is a single <code class="samp docutils literal"><span class="pre">out</span></code>
parameter, GPS automatically creates a function instead of a procedure.</p>
<p>GPS uses the same name for the local variable for the parameters. Often, it
makes sense to recompile the new version of the source and apply the
<span class="menuselection">Refactoring ‣ Rename Entity</span> refactoring to have more
specific names for the parameters, or the <span class="menuselection">Refactoring ‣
Name Parameters</span> refactoring so that calls to the new method uses named
parameters to further clarify the code:</p>
<div class="highlight-ada"><div class="highlight"><pre><span></span><span class="p">...</span> <span class="n">code</span> <span class="ow">not</span> <span class="n">shown</span>

<span class="kd">procedure</span> <span class="nf">Print_Details</span>
  <span class="p">(</span><span class="nv">Self</span> <span class="p">: </span><span class="nv">Invoice</span><span class="p">&#39;</span><span class="na">Class</span><span class="p">;</span>
   <span class="nv">Outstanding</span> <span class="p">: </span><span class="nv">Natural</span><span class="p">);</span>
<span class="c1">--  Print Details</span>

<span class="c1">-------------------</span>
<span class="c1">-- Print_Details --</span>
<span class="c1">-------------------</span>

<span class="kd">procedure</span> <span class="nf">Print_Details</span>
  <span class="p">(</span><span class="nv">Self</span> <span class="p">: </span><span class="nv">Invoice</span><span class="p">&#39;</span><span class="na">Class</span><span class="p">;</span>
   <span class="nv">Outstanding</span> <span class="p">: </span><span class="nv">Natural</span><span class="p">)</span>
<span class="kr">is</span>
<span class="kr">begin</span>
   <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot;Name: &quot;</span> <span class="o">&amp;</span> <span class="n">To_String</span> <span class="p">(</span><span class="n">Self</span><span class="p">.</span><span class="n">Name</span><span class="p">));</span>
   <span class="n">Put_Line</span> <span class="p">(</span><span class="s">&quot;Outstanding:&quot;</span> <span class="o">&amp;</span> <span class="n">Outstanding</span><span class="p">&#39;</span><span class="na">Img</span><span class="p">);</span>
<span class="kr">end</span> <span class="nf">Print_Details</span><span class="p">;</span>

<span class="kd">procedure</span> <span class="nf">Print_Owing</span> <span class="p">(</span><span class="nv">Self</span> <span class="p">: </span><span class="nv">Invoice</span><span class="p">)</span> <span class="kr">is</span>
   <span class="n">E</span> <span class="p">:</span> <span class="n">Order_Lists</span><span class="p">.</span><span class="kt">Cursor</span> <span class="p">:=</span> <span class="n">First</span> <span class="p">(</span><span class="n">Self</span><span class="p">.</span><span class="n">Orders</span><span class="p">);</span>
   <span class="n">Outstanding</span> <span class="p">:</span> <span class="kt">Natural</span> <span class="p">:=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="n">Each</span> <span class="p">:</span> <span class="n">Order</span><span class="p">;</span>
<span class="kr">begin</span>
   <span class="n">Print_Banner</span><span class="p">;</span>

   <span class="c1">--  Calculate Outstanding</span>

   <span class="kr">while</span> <span class="n">Has_Element</span> <span class="p">(</span><span class="n">E</span><span class="p">)</span> <span class="kr">loop</span>
      <span class="n">Each</span> <span class="p">:=</span> <span class="n">Element</span> <span class="p">(</span><span class="n">E</span><span class="p">);</span>
      <span class="n">Outstanding</span> <span class="p">:=</span> <span class="n">Outstanding</span> <span class="o">+</span> <span class="n">Each</span><span class="p">.</span><span class="n">Get_Amount</span><span class="p">;</span>
      <span class="n">Next</span> <span class="p">(</span><span class="n">E</span><span class="p">);</span>
   <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>

   <span class="n">Print_Details</span> <span class="p">(</span><span class="n">Self</span><span class="p">,</span> <span class="n">Outstanding</span><span class="p">);</span>
<span class="kr">end</span> <span class="nf">Print_Owing</span><span class="p">;</span>
</pre></div>
</div>
<p>Finally, we want to extract the code that computes the outstanding
balance. When this code is moved, the variables <strong class="command">E</strong> and
<strong class="command">Each</strong> become dead in <strong class="command">Print_Owing</strong> and are moved into
the new subprogram (which we call <strong class="command">Get_Outstanding</strong>). The initial
selection should include the blank lines before and after the code to keep
the resulting <strong class="command">Print_Owing</strong> simpler. GPS automatically ignores
those blank lines.  Here is the result of that last refactoring</p>
<div class="highlight-ada"><div class="highlight"><pre><span></span><span class="p">...</span> <span class="n">code</span> <span class="ow">not</span> <span class="n">shown</span>

<span class="kd">procedure</span> <span class="nf">Get_Outstanding</span> <span class="p">(</span><span class="nv">Outstanding</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Natural</span><span class="p">);</span>
<span class="c1">--  Calculate Outstanding</span>

<span class="c1">---------------------</span>
<span class="c1">-- Get_Outstanding --</span>
<span class="c1">---------------------</span>

<span class="kd">procedure</span> <span class="nf">Get_Outstanding</span> <span class="p">(</span><span class="nv">Outstanding</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Natural</span><span class="p">)</span> <span class="kr">is</span>
   <span class="n">E</span> <span class="p">:</span> <span class="n">Order_Lists</span><span class="p">.</span><span class="kt">Cursor</span> <span class="p">:=</span> <span class="n">First</span> <span class="p">(</span><span class="n">Self</span><span class="p">.</span><span class="n">Orders</span><span class="p">);</span>
   <span class="n">Each</span> <span class="p">:</span> <span class="n">Order</span><span class="p">;</span>
<span class="kr">begin</span>
   <span class="kr">while</span> <span class="n">Has_Element</span> <span class="p">(</span><span class="n">E</span><span class="p">)</span> <span class="kr">loop</span>
      <span class="n">Each</span> <span class="p">:=</span> <span class="n">Element</span> <span class="p">(</span><span class="n">E</span><span class="p">);</span>
      <span class="n">Outstanding</span> <span class="p">:=</span> <span class="n">Outstanding</span> <span class="o">+</span> <span class="n">Each</span><span class="p">.</span><span class="n">Get_Amount</span><span class="p">;</span>
      <span class="n">Next</span> <span class="p">(</span><span class="n">E</span><span class="p">);</span>
   <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>
<span class="kr">end</span> <span class="nf">Get_Outstanding</span><span class="p">;</span>

<span class="kd">procedure</span> <span class="nf">Print_Owing</span> <span class="p">(</span><span class="nv">Self</span> <span class="p">: </span><span class="nv">Invoice</span><span class="p">)</span> <span class="kr">is</span>
   <span class="n">Outstanding</span> <span class="p">:</span> <span class="kt">Natural</span> <span class="p">:=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kr">begin</span>
   <span class="n">Print_Banner</span><span class="p">;</span>
   <span class="n">Get_Outstanding</span> <span class="p">(</span><span class="n">Outstanding</span><span class="p">);</span>
   <span class="n">Print_Details</span> <span class="p">(</span><span class="n">Self</span><span class="p">,</span> <span class="n">Outstanding</span><span class="p">);</span>
<span class="kr">end</span> <span class="nf">Print_Owing</span><span class="p">;</span>
</pre></div>
</div>
<p>The final version of <strong class="command">Print_Owing</strong> is not perfect. For example,
passing the initial value 0 to <strong class="command">Get_Outstanding</strong> is useless and,
in fact, it should probably be a function with no parameter. But GPS
already saves a lot of time and manipulation even given these
imperfections.</p>
<p>Finally, a word of caution: this refactoring does not check that you are
starting with valid input. For example, if the text you select includes a
<strong class="command">declare</strong> block, you should always include the full block, not
just a part of it (or select text between <strong class="command">begin</strong> and
<strong class="command">end</strong>). Likewise, GPS does not expect you to select any part of the
variable declarations, just the code.</p>
</div>
</div>
<div class="section" id="using-an-external-editor">
<span id="index-32"></span><span id="id10"></span><h2>5.7. Using an External Editor<a class="headerlink" href="#using-an-external-editor" title="Permalink to this headline">¶</a></h2>
<p id="index-33">GPS is integrated with a number of external editors, in particular
<strong class="program">emacs</strong> and <strong class="program">vi</strong>. The choice of the default external
editor is done in the <span class="menuselection">Editor ‣ External editor</span>
preference.</p>
<p>The following values are recognized:</p>
<ul id="index-34">
<li><p class="first"><strong class="program">gnuclient</strong></p>
<p>This is the recommended client. It is based on Emacs, but needs an extra
package to be installed. This is the only client providing a full
integration in GPS, since any extended lisp command can be sent to the
Emacs server.</p>
<p>By default, <strong class="program">gnuclient</strong> opens a new Emacs frame for every file
you open. You might want to add the following code to your <code class="file docutils literal"><span class="pre">.emacs</span></code>
file (create one if needed) so that the same Emacs frame is reused each
time:</p>
<div class="highlight-ada"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">setq</span> <span class="n">gnuserv</span><span class="o">-</span><span class="n">frame</span> <span class="p">(</span><span class="n">car</span> <span class="p">(</span><span class="n">frame</span><span class="o">-</span><span class="n">list</span><span class="p">)))</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://www.hpl.hp.com/personal/ange/gnuserv/home.html">http://www.hpl.hp.com/personal/ange/gnuserv/home.html</a> for more
information.</p>
</li>
</ul>
<ul id="index-35">
<li><p class="first"><strong class="program">emacsclient</strong></p>
<p>This is a program that is always available if you have installed Emacs. As
opposed to starting a new Emacs every time, it reuses an existing Emacs
sessions, so it is extremely fast to open a file.</p>
</li>
</ul>
<ul id="index-36">
<li><p class="first"><strong class="program">emacs</strong></p>
<p>This clients start a new Emacs session every time a file needs to be
opened. You should use <strong class="program">emacsclient</strong> instead, since it is much
faster and makes it easier to copy and paste between multiple files.  The
only reason to use this external editor is if your system does not support
<strong class="program">emacsclient</strong>.</p>
</li>
</ul>
<ul id="index-37">
<li><p class="first"><strong class="program">vim</strong></p>
<p><cite>Vim</cite> is a vi-like editor that provides a number of enhancements, for
example, syntax highlighting for all languages supported by GPS.
Selecting this external editor starts an <strong class="program">xterm</strong> (or command
window, depending on your system) with a running <strong class="program">vim</strong> process
editing the file.</p>
<p>One limitation of this editor is that if GPS needs to open the same file
a second time, it opens a new editor instead of reusing the existing one.</p>
<p>To enable this capability, the <strong class="program">xterm</strong> executable must be found
in the PATH and thus this is not supported on Windows systems.  On
Windows systems, use the <strong class="command">program</strong> editor instead.</p>
</li>
<li><p class="first"><strong class="program">vi</strong></p>
<p>This editor works exactly like <strong class="program">vim</strong>, but uses the standard
<strong class="program">vi</strong> command instead of <strong class="program">vim</strong>.</p>
</li>
</ul>
<ul id="index-38">
<li><p class="first"><strong class="program">custom</strong></p>
<p>Specify any external editor by choosing this entry.  Specify the complete
command line used to call the editor in the <span class="menuselection">Editor ‣
Custom editor command</span> preference.</p>
</li>
<li><p class="first"><strong class="program">none</strong></p>
<p>No external editor is used and the contextual menus do not appear.</p>
</li>
</ul>
<p>In the cases that require an Emacs server, the project file currently used
in GPS is set appropriately the first time Emacs is spawned. This means
that if you load a new project in GPS or modify the paths of the current
project, you should kill any running Emacs, so a new one is spawned by GPS
with the appropriate project.</p>
<p>Alternatively, explicitly reload the project from Emacs itself by using the
<span class="menuselection">File ‣ Load Project</span> menu in <strong class="program">emacs</strong> (if
<strong class="command">ada-mode</strong> is correctly installed).</p>
<p id="index-39">The <span class="menuselection">Editor ‣ Always use external editor</span> preference lets
you choose to use an external editor every time you double-click on a file,
instead of opening GPS&#8217;s own editor.</p>
<span class="target" id="index-40"></span><span class="target" id="index-41"></span><span class="target" id="index-42"></span><span class="target" id="index-43"></span></div>
<div class="section" id="using-the-clipboard">
<span id="index-44"></span><span id="id11"></span><h2>5.8. Using the Clipboard<a class="headerlink" href="#using-the-clipboard" title="Permalink to this headline">¶</a></h2>
<p>This section is of interest to X Window System users who are used to cutting
and pasting with the middle mouse button. In the GPS text editor, as in many
recent X applications, the <span class="guilabel">GPS clipboard</span> is set by explicit
cut/copy/paste actions, either through menu items or keyboard shortcuts,
and the <span class="guilabel">primary clipboard</span> (i.e. the &#8216;middle button&#8217; clipboard)
is set to the current selection.</p>
<p>Therefore, copy/paste between GPS and other X applications using the
<span class="guilabel">primary clipboard</span> still work provided there is text currently
selected. The <span class="guilabel">GPS clipboard</span>, when set, overrides the
<span class="guilabel">primary clipboard</span>.</p>
<p>By default, GPS overrides the X mechanism. To prevent this, add the
following line:</p>
<div class="highlight-ada"><div class="highlight"><pre><span></span><span class="n">GPS</span><span class="p">.</span><span class="n">INTERNAL</span><span class="p">.</span><span class="n">OVERRIDE_MIDDLE_CLICK_PASTE</span> <span class="o">=</span> <span class="n">no</span>
</pre></div>
</div>
<p>to your <code class="file docutils literal"><span class="pre">traces.cfg</span></code> file (typically in <code class="file docutils literal"><span class="pre">~/.gps/</span></code>). Note that
the X mechanism pastes all attributes of text, including coloring and
editability, which can be confusing.</p>
<p>See <a class="reference external" href="http://standards.freedesktop.org/clipboards-spec/clipboards-latest.txt">http://standards.freedesktop.org/clipboards-spec/clipboards-latest.txt</a>
for more information.</p>
</div>
<div class="section" id="saving-files">
<span id="index-45"></span><span id="id12"></span><h2>5.9. Saving Files<a class="headerlink" href="#saving-files" title="Permalink to this headline">¶</a></h2>
<p id="index-46">After you have finished editing your files, you need to save them.  Do so by
selecting the <span class="menuselection">File ‣ Save</span> menu, which saves the
currently selected file.</p>
<p id="index-47">Use the <span class="menuselection">File ‣ Save As...</span> menu if you want to save the
file with another name or in another directory.</p>
<p id="index-48">If you have multiple files to save, use the <span class="menuselection">File ‣ Save
More ‣ All</span> menu, which opens a dialog listing all the currently modified
editors.  Select which ones should be saved and click on <span class="guilabel">Save</span>
to save those editors.</p>
<span class="target" id="index-49"></span><p id="index-50">When calling external commands, such as compiling a file, if the
<span class="menuselection">Editor ‣ Autosave delay</span> preference is set to 0, this
same dialog is also used to make sure the external command sees your
changes.  If the preference is enabled, editors are saved automatically.</p>
<img alt="_images/save-dialog.jpg" src="_images/save-dialog.jpg" />
<p>Conveniently select or unselect all the files at once by clicking on the
title of the first column (labeled <span class="guilabel">Select</span>). This toggles the
selection status of all files.</p>
<p>If you press <span class="guilabel">Cancel</span> instead of <span class="guilabel">Save</span>, nothing is
saved and the action that displayed this dialog is also canceled. Such
actions can be, for example, starting a compilation command, a VCS
operation, or quitting GPS with unsaved files.</p>
</div>
<div class="section" id="printing-files">
<h2>5.10. Printing Files<a class="headerlink" href="#printing-files" title="Permalink to this headline">¶</a></h2>
<p>GPS lets you configure how printing is performed, via its
<span class="guilabel">External Commands/Print command</span> preference.</p>
<p>This program is required for Unix systems, and is set to <strong class="program">lp</strong>
by default. Other popular choices include <strong class="program">a2ps</strong> which provides
pretty-printing and syntax highlighting.</p>
<p>On Windows, this preference is optional and the preference is empty by default
since GPS provides built-in printing.  If you specify an external tool, such as
the <strong class="program">PrintFile</strong> freeware utility available from
<a class="reference external" href="http://www.lerup.com/printfile/descr.html">http://www.lerup.com/printfile/descr.html</a>, GPS uses that.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="navigation.html" title="6. Source Navigation"
             >next</a> |</li>
        <li class="right" >
          <a href="mdi.html" title="4. Multiple Document Interface"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GPS 19.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2001-2019, AdaCore.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
  </body>
</html>