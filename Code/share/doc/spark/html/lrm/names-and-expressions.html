<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4. Names and Expressions &#8212; SPARK 2014 Reference Manual 2019</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2019',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. Statements" href="statements.html" />
    <link rel="prev" title="3. Declarations and Types" href="declarations-and-types.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="statements.html" title="5. Statements"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="declarations-and-types.html" title="3. Declarations and Types"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SPARK 2014 Reference Manual 2019</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4. Names and Expressions</a><ul>
<li><a class="reference internal" href="#names">4.1. Names</a><ul>
<li><a class="reference internal" href="#indexed-components">4.1.1. Indexed Components</a></li>
<li><a class="reference internal" href="#slices">4.1.2. Slices</a></li>
<li><a class="reference internal" href="#selected-components">4.1.3. Selected Components</a></li>
<li><a class="reference internal" href="#attributes">4.1.4. Attributes</a></li>
<li><a class="reference internal" href="#user-defined-references">4.1.5. User-Defined References</a></li>
<li><a class="reference internal" href="#user-defined-indexing">4.1.6. User-Defined Indexing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#literals">4.2. Literals</a></li>
<li><a class="reference internal" href="#aggregates">4.3. Aggregates</a></li>
<li><a class="reference internal" href="#expressions">4.4. Expressions</a><ul>
<li><a class="reference internal" href="#update-expressions">4.4.1. Update Expressions</a><ul>
<li><a class="reference internal" href="#record-update-expressions">4.4.1.1. Record Update Expressions</a></li>
<li><a class="reference internal" href="#array-update-expressions">4.4.1.2. Array Update Expressions</a></li>
<li><a class="reference internal" href="#multi-dimensional-array-update-expressions">4.4.1.3. Multi-dimensional Array Update Expressions</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#operators-and-expression-evaluation">4.5. Operators and Expression Evaluation</a></li>
<li><a class="reference internal" href="#type-conversions">4.6. Type Conversions</a></li>
<li><a class="reference internal" href="#qualified-expressions">4.7. Qualified Expressions</a></li>
<li><a class="reference internal" href="#allocators">4.8. Allocators</a></li>
<li><a class="reference internal" href="#static-expressions-and-static-subtypes">4.9. Static Expressions and Static Subtypes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="declarations-and-types.html"
                        title="previous chapter">3. Declarations and Types</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="statements.html"
                        title="next chapter">5. Statements</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/names-and-expressions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="names-and-expressions">
<h1>4. Names and Expressions<a class="headerlink" href="#names-and-expressions" title="Permalink to this headline">¶</a></h1>
<p>The term <em>assertion expression</em> denotes an expression that appears inside an
assertion, which can be a pragma Assert, a precondition or postcondition, a
type invariant or (subtype) predicate, or other assertions introduced in SPARK 2014.</p>
<div class="section" id="names">
<h2>4.1. Names<a class="headerlink" href="#names" title="Permalink to this headline">¶</a></h2>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-names-01">
<li>Neither <code class="docutils literal"><span class="pre">explicit_dereference</span></code> nor <code class="docutils literal"><span class="pre">implicit_dereference</span></code> are
in SPARK 2014.</li>
</ol>
<div class="section" id="indexed-components">
<span id="etu-names"></span><h3>4.1.1. Indexed Components<a class="headerlink" href="#indexed-components" title="Permalink to this headline">¶</a></h3>
<p>No extensions or restrictions.</p>
</div>
<div class="section" id="slices">
<h3>4.1.2. Slices<a class="headerlink" href="#slices" title="Permalink to this headline">¶</a></h3>
<p>No extensions or restrictions.</p>
</div>
<div class="section" id="selected-components">
<h3>4.1.3. Selected Components<a class="headerlink" href="#selected-components" title="Permalink to this headline">¶</a></h3>
<p>Some constructs which would unconditionally raise an exception at
run time in Ada are rejected as illegal in SPARK 2014 if this property
can be determined prior to formal program verification.</p>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-selected-components-01">
<li>If the prefix of a record component selection is known statically
to be constrained so that the selected component is not present,
then the component selection (which, in Ada, would raise
Constraint_Error if it were to be evaluated) is illegal.</li>
</ol>
</div>
<div class="section" id="attributes">
<span id="etu-selected-components"></span><h3>4.1.4. Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<p>Many of the Ada language defined attributes are in SPARK 2014 but there
are exclusions.  For a full list of attributes supported by SPARK 2014 see
<a class="reference internal" href="language-defined-aspects-and-attributes.html#language-defined-attributes"><span class="std std-ref">Language-Defined Attributes</span></a>.</p>
<p>A SPARK 2014 implementation is permitted to support other attributes
which are not Ada or SPARK 2014 language defined attributes and these
should be documented in the User Guide for the tool.</p>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-attributed-01">
<li>The prefix of a &#8216;<em>Access</em> <code class="docutils literal"><span class="pre">attribute_reference</span></code> shall be a constant
without variable input. [This ensures that information flows through such
access values only depend on assignments to the access objects, not
assignments to the accessed objects. See <a class="reference internal" href="declarations-and-types.html#object-declarations"><span class="std std-ref">Object Declarations</span></a>.]</li>
</ol>
</div>
<div class="section" id="user-defined-references">
<span id="etu-attributes"></span><h3>4.1.5. User-Defined References<a class="headerlink" href="#user-defined-references" title="Permalink to this headline">¶</a></h3>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-user-defined-references-01">
<li>User-defined references are not allowed.</li>
</ol>
<ol class="arabic simple" id="tu-user-defined-references-02" start="2">
<li>The aspect Implicit_Dereference is not permitted.</li>
</ol>
</div>
<div class="section" id="user-defined-indexing">
<span id="etu-user-defined-references"></span><h3>4.1.6. User-Defined Indexing<a class="headerlink" href="#user-defined-indexing" title="Permalink to this headline">¶</a></h3>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-user-defined-indexing-01">
<li>User-defined indexing is not allowed.</li>
</ol>
<ol class="arabic simple" id="tu-user-defined-indexing-02" start="2">
<li>The aspects Constant_Indexing and Variable_Indexing are not
permitted.</li>
</ol>
</div>
</div>
<div class="section" id="literals">
<span id="etu-user-defined-indexing"></span><h2>4.2. Literals<a class="headerlink" href="#literals" title="Permalink to this headline">¶</a></h2>
<p>No extensions or restrictions.</p>
</div>
<div class="section" id="aggregates">
<h2>4.3. Aggregates<a class="headerlink" href="#aggregates" title="Permalink to this headline">¶</a></h2>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-aggregates-01">
<li>The box symbol, &lt;&gt;, shall not be used in an aggregate unless the type(s)
of the corresponding component(s) define full default initialization.</li>
</ol>
<ol class="arabic simple" id="tu-aggregates-02" start="2">
<li>If the <code class="docutils literal"><span class="pre">ancestor_part</span></code> of an <code class="docutils literal"><span class="pre">extension_aggregate</span></code>
is a <code class="docutils literal"><span class="pre">subtype_mark</span></code>, then the type of the denoted subtype
shall define full default initialization.</li>
</ol>
<p id="etu-aggregates">[The box symbol cannot be used in an aggregate to produce an uninitialized
scalar value or a composite value having an uninitialized scalar value as a
subcomponent. Similarly for an ancestor subtype in an extension aggregate.]</p>
</div>
<div class="section" id="expressions">
<span id="id1"></span><h2>4.4. Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h2>
<p>An expression is said to be <em>side-effect free</em> if the evaluation of the
expression does not update any object.  The evaluation of an expression
free from side-effects only retrieves or computes a value.</p>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-expressions-01">
<li>An expression shall be side-effect free.
[Strictly speaking, this &#8220;rule&#8221; is a consequence of other rules,
most notably the rule that a function cannot have outputs other
than its result.]</li>
</ol>
<ol class="arabic" id="tu-expressions-02" start="2">
<li><p class="first">An expression (or range) in SPARK 2014 occurring in certain contexts
(listed below) shall not have a variable input. This means that
such an expression shall not read a variable, nor shall it call a
function which (directly or indirectly) reads a variable. These
contexts include:</p>
<blockquote>
<div><ul>
<li><p class="first">a constraint other than the range of a loop parameter
specification (see <a class="reference internal" href="declarations-and-types.html#subtype-declarations"><span class="std std-ref">Subtype Declarations</span></a>);</p>
</li>
<li><p class="first">the default_expression of a component declaration (see
<a class="reference internal" href="declarations-and-types.html#record-types"><span class="std std-ref">Record Types</span></a>);</p>
</li>
<li><p class="first">the default_expression of a discriminant_specification
(see <a class="reference internal" href="declarations-and-types.html#discriminants"><span class="std std-ref">Discriminants</span></a>);</p>
</li>
<li><p class="first">a Dynamic_Predicate aspect specification
(see <a class="reference internal" href="declarations-and-types.html#subtype-predicates"><span class="std std-ref">Subtype Predicates</span></a>);</p>
</li>
<li><p class="first">a Type_Invariant aspect specification
(see <a class="reference internal" href="packages.html#type-invariants"><span class="std std-ref">Type Invariants</span></a>);</p>
</li>
<li><p class="first">an indexing expression of an indexed_component or the discrete_range
of a slice in an object renaming declaration which renames
part of that index or slice (see <a class="reference internal" href="visibility-rules.html#object-renaming-declarations"><span class="std std-ref">Object Renaming Declarations</span></a>);</p>
</li>
<li><p class="first">a generic actual parameter corresponding to a generic formal object
having mode <strong>in</strong> (see <a class="reference internal" href="generic-units.html#generic-instantiation"><span class="std std-ref">Generic Instantiation</span></a>);</p>
</li>
<li><p class="first">the declaration and body of a user-defined equality operation on a
record type (see <a class="reference internal" href="subprograms.html#overloading-of-operators"><span class="std std-ref">Overloading of Operators</span></a>).</p>
<p>[This avoids the case where such a record type is a component of another
composite type, whose predefined equality operation now depends on
variables through the primitive equality operation on its component.]</p>
</li>
</ul>
</div></blockquote>
</li>
</ol>
<p id="etu-expressions">[An expression in one of these contexts may read a constant
which is initialized with the value of a variable.]</p>
<p>[These rules simplify analysis by eliminating the need to deal with
implicitly created anonymous constants. An expression which does not
have a variable input will always yield the same result if it is
(conceptually, for purposes of static analysis) reevaluated later.
This is not true of an expression that has a variable input because the
value of the variable might have changed.]</p>
<p>[For purposes of these rules, the current instance of a type or subtype is
not considered to be a variable input in the case of a Dynamic_Predicate
or Type_Invariant condition, but is considered to be a variable
input in the case of the default_expression of a component declaration.]</p>
<div class="section" id="update-expressions">
<span id="id2"></span><h3>4.4.1. Update Expressions<a class="headerlink" href="#update-expressions" title="Permalink to this headline">¶</a></h3>
<p>The Update attribute provides a way of overwriting specified
components of a copy of a given composite value.</p>
<p>For a prefix <code class="docutils literal"><span class="pre">X</span></code>
that denotes an object of a nonlimited record type or record extension
<code class="docutils literal"><span class="pre">T</span></code>, the attribute</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">X</span><span class="s1">&#39;Update ( record_component_association_list )</span>
</pre></div>
</div>
<p>is defined and yields a value of type <code class="docutils literal"><span class="pre">T</span></code> and is a <em>record update
expression</em>.</p>
<p>For a prefix <code class="docutils literal"><span class="pre">X</span></code> that denotes an object of a nonlimited one
dimensional array type <code class="docutils literal"><span class="pre">T</span></code>, the attribute</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">X</span><span class="s1">&#39;Update ( array_component_association {, array_component_association} )</span>
</pre></div>
</div>
<p>is defined and yields a value of type <code class="docutils literal"><span class="pre">T</span></code> and is an <em>array update
expression</em>.</p>
<p>For a prefix <code class="docutils literal"><span class="pre">X</span></code> that denotes an object of a nonlimited
multidimensional array type <code class="docutils literal"><span class="pre">T</span></code>, the attribute</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">X</span><span class="s1">&#39;Update ( multidimensional_array_component_association</span>
        <span class="p">{,</span> <span class="n">multidimensional_array_component_association</span><span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
<p>is defined and yields a value of type <code class="docutils literal"><span class="pre">T</span></code> and is a
<em>multi-dimensional array update</em>.  Where
<code class="docutils literal"><span class="pre">multidimensional_array_component_association</span></code> has the following
syntax:</p>
<p class="centered">
<strong><strong>Syntax</strong></strong></p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">multidimensional_array_component_association</span> <span class="p">::</span><span class="o">=</span>
  <span class="n">index_expression_list_list</span> <span class="o">=&gt;</span> <span class="n">expression</span>
<span class="n">index_expression_list_list</span> <span class="p">::</span><span class="o">=</span>
  <span class="n">index_expression_list</span> <span class="p">{</span> <span class="o">|</span> <span class="n">index_expression_list</span> <span class="p">}</span>
<span class="n">index_expression_list</span> <span class="p">::</span><span class="o">=</span>
  <span class="p">(</span> <span class="n">expression</span> <span class="p">{,</span> <span class="n">expression</span><span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-update-expressions-01">
<li>The box symbol, &lt;&gt;, may not appear in any <code class="docutils literal"><span class="pre">expression</span></code> appearing
in an <em>update expression</em>.</li>
</ol>
<p class="centered">
<strong><strong>Dynamic Semantics</strong></strong></p><ol class="arabic simple" id="tu-update-expressions-02" start="2">
<li>In all cases (i.e., whether <code class="docutils literal"><span class="pre">T</span></code> is a record type, a record
extension type, or an array type - see below), evaluation of
<code class="docutils literal"><span class="pre">X'Update</span></code> begins with the creation of an anonymous object of
type <code class="docutils literal"><span class="pre">T</span></code> which is initialized to the value of <code class="docutils literal"><span class="pre">X</span></code> in the same
way as for an occurrence of <code class="docutils literal"><span class="pre">X'Old</span></code> (except that the object is
constrained by its initial value but not constant).</li>
</ol>
<ol class="arabic simple" id="tu-update-expressions-03" start="3">
<li>Next, components of this object are updated as described in the
following subsections. The attribute reference then denotes a
constant view of this updated object. The master and accessibility
level of this object are defined as for the anonymous object of an
aggregate.</li>
</ol>
<ol class="arabic simple" id="tu-update-expressions-04" start="4">
<li>The assignments to components of the result object described in the
following subsections are assignment operations and include
performance of any checks associated with evaluation of the target
component name or with implicit conversion of the source value to
the component subtype.</li>
</ol>
<div class="section" id="record-update-expressions">
<span id="etu-update-expressions"></span><h4>4.4.1.1. Record Update Expressions<a class="headerlink" href="#record-update-expressions" title="Permalink to this headline">¶</a></h4>
<p>For a record update expression of type <code class="docutils literal"><span class="pre">T</span></code> the following are
required.</p>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-update-expressions-05" start="5">
<li>The <code class="docutils literal"><span class="pre">record_component_association_list</span></code> shall have one or more
<code class="docutils literal"><span class="pre">record_component_associations</span></code>, each of which shall have a
non-<strong>others</strong> <code class="docutils literal"><span class="pre">component_choice_list</span></code> and an expression.</li>
</ol>
<ol class="arabic simple" id="tu-update-expressions-06" start="6">
<li>Each <code class="docutils literal"><span class="pre">selector_name</span></code> of each <code class="docutils literal"><span class="pre">record_component_name</span></code> shall denote a
distinct non discriminant component of <code class="docutils literal"><span class="pre">T</span></code>.</li>
</ol>
<ol class="arabic simple" id="tu-update-expressions-07" start="7">
<li>Each <code class="docutils literal"><span class="pre">record_component_association</span></code>&#8216;s associated components shall
all be of the same type. The expected type and applicable index
constraint of the expression is defined as for a
<code class="docutils literal"><span class="pre">record_component_association</span></code> occurring within a record
aggregate.</li>
</ol>
<ol class="arabic simple" id="tu-update-expressions-08" start="8">
<li>Each selector of all <code class="docutils literal"><span class="pre">component_choice_lists</span></code> of a record
update expression shall denote a distinct component.</li>
</ol>
<p class="centered" id="etu-record-update-expressions-lr">
<strong><strong>Dynamic Semantics</strong></strong></p><ol class="arabic simple" id="tu-update-expressions-09" start="9">
<li>For each component for which an expression is provided, the
expression value is assigned to the corresponding component of the
result object. The order in which the components are updated is
unspecified.</li>
</ol>
<p id="etu-record-update-expressions-ds">[Components in a record update expression must be distinct.  The following is illegal</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Some_Record</span><span class="s1">&#39;Update</span>
  <span class="p">(</span><span class="n">Field_1</span> <span class="o">=&gt;</span> <span class="o">...</span> <span class="p">,</span>
   <span class="n">Field_2</span> <span class="o">=&gt;</span> <span class="o">...</span> <span class="p">,</span>
   <span class="n">Field_1</span> <span class="o">=&gt;</span> <span class="o">...</span> <span class="p">);</span> <span class="o">--</span> <span class="n">illegal</span><span class="p">;</span> <span class="n">components</span> <span class="ow">not</span> <span class="n">distinct</span>
</pre></div>
</div>
<p>because the order of component updates is unspecified.]</p>
</div>
<div class="section" id="array-update-expressions">
<h4>4.4.1.2. Array Update Expressions<a class="headerlink" href="#array-update-expressions" title="Permalink to this headline">¶</a></h4>
<p>For an array update expression of type <code class="docutils literal"><span class="pre">T</span></code> the following are
required.</p>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-update-expressions-10" start="10">
<li>Each <code class="docutils literal"><span class="pre">array_component_association</span></code> of the attribute reference
shall have one or more <code class="docutils literal"><span class="pre">array_component_associations</span></code>, each of
which shall have an expression.</li>
</ol>
<ol class="arabic simple" id="tu-update-expressions-11" start="11">
<li>The expected type and applicable index constraint of the
expression is defined as for an <code class="docutils literal"><span class="pre">array_component_association</span></code>
occurring within an array aggregate of type <code class="docutils literal"><span class="pre">T</span></code>. The expected
type for each <code class="docutils literal"><span class="pre">discrete_choice</span></code> is the index type of <code class="docutils literal"><span class="pre">T</span></code>.</li>
</ol>
<ol class="arabic simple" id="tu-update-expressions-12" start="12">
<li>The reserved word <strong>others</strong> shall not occur as a
<code class="docutils literal"><span class="pre">discrete_choice</span></code> of an <code class="docutils literal"><span class="pre">array_component_association</span></code> of the
<code class="docutils literal"><span class="pre">attribute_reference</span></code>.</li>
</ol>
<p class="centered" id="etu-array-update-expressions-lr">
<strong><strong>Dynamic Semantics</strong></strong></p><ol class="arabic simple" id="tu-update-expressions-13" start="13">
<li>The discrete choices and array component expressions are
evaluated. Each array component expression is evaluated once for
each associated component, as for an array aggregate. For each
such associated component of the result object, the expression
value is assigned to the component.</li>
</ol>
<ol class="arabic simple" id="tu-update-expressions-14" start="14">
<li>Evaluations and updates are performed in the order in which the
<code class="docutils literal"><span class="pre">array_component_associations</span></code> are given; within a single
<code class="docutils literal"><span class="pre">array_component_association</span></code>, in the order of the
<code class="docutils literal"><span class="pre">discrete_choice_list</span></code>; and within the range of a single
<code class="docutils literal"><span class="pre">discrete_choice</span></code>, in ascending order.</li>
</ol>
<p id="tu-update-expressions-14-1">[Note: the <code class="docutils literal"><span class="pre">Update</span></code> attribute for an array object allows multiple
assignments to the same component, as in either</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Some_Array</span><span class="s1">&#39;Update (1 .. 10 =&gt; True, 5 =&gt; False)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Some_Array</span><span class="s1">&#39;Update (Param_1&#39;</span><span class="n">Range</span> <span class="o">=&gt;</span> <span class="kc">True</span><span class="p">,</span> <span class="n">Param_2</span><span class="s1">&#39;Range =&gt; False)</span>
<span class="o">--</span> <span class="n">ok</span> <span class="n">even</span> <span class="k">if</span> <span class="n">the</span> <span class="n">two</span> <span class="n">ranges</span> <span class="n">overlap</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="multi-dimensional-array-update-expressions">
<span id="etu-array-update-expressions-ds"></span><h4>4.4.1.3. Multi-dimensional Array Update Expressions<a class="headerlink" href="#multi-dimensional-array-update-expressions" title="Permalink to this headline">¶</a></h4>
<p>For a multi-dimensional array update expression of type <code class="docutils literal"><span class="pre">T</span></code> the
following are required.</p>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-update-expressions-15" start="15">
<li>The expected type and applicable index constraint of the
expression of a <code class="docutils literal"><span class="pre">multidimensional_array_component_association</span></code>
are defined as for the expression of an
<code class="docutils literal"><span class="pre">array_component_association</span></code> occurring within an array
aggregate of type <code class="docutils literal"><span class="pre">T</span></code>.</li>
</ol>
<ol class="arabic simple" id="tu-update-expressions-16" start="16">
<li>The length of each <code class="docutils literal"><span class="pre">index_expression_list</span></code> shall equal the
dimensionality of <code class="docutils literal"><span class="pre">T</span></code>. The expected type for each expression in
an <code class="docutils literal"><span class="pre">index_expression_list</span></code> is the corresponding index type of
<code class="docutils literal"><span class="pre">T</span></code>.</li>
</ol>
<p class="centered" id="etu-multi-dimensional-array-update-expressions-lr">
<strong><strong>Dynamic Semantics</strong></strong></p><ol class="arabic simple" id="tu-multi-dimensional-array-update-expressions-17" start="17">
<li>For each <code class="docutils literal"><span class="pre">multidimensional_array_component</span></code> association (in the
order in which they are given) and for each
<code class="docutils literal"><span class="pre">index_expression_list</span></code> (in the order in which they are given),
the index values of the <code class="docutils literal"><span class="pre">index_expression_list</span></code> and the
expression are evaluated (in unspecified order) and the expression
value is assigned to the component of the result object indexed by
the given index values. Each array component expression is
evaluated once for each associated <code class="docutils literal"><span class="pre">index_expression_list</span></code>.</li>
</ol>
<p class="centered" id="etu-multi-dimensional-array-update-expressions-ds">
<strong><strong>Examples</strong></strong></p><div class="highlight-ada"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">Update_Examples</span>
  <span class="kr">with</span><span class="p"> </span><span class="n">SPARK_Mode</span>
<span class="kr">is</span><span class="p"></span>
   <span class="kr">type</span><span class="p"> </span><span class="n">Rec</span> <span class="kr">is</span><span class="p"> </span><span class="kr">record</span><span class="p"></span>
      <span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">Integer</span><span class="p">;</span>
   <span class="k">end record</span><span class="p">;</span>

   <span class="kr">type</span><span class="p"> </span><span class="n">Arr</span> <span class="kr">is</span><span class="p"> </span><span class="kr">array</span><span class="p"> </span><span class="o">(</span><span class="mi">1</span> <span class="o">..</span> <span class="mi">3</span><span class="o">)</span> <span class="kr">of</span><span class="p"> </span><span class="n">Integer</span><span class="p">;</span>

   <span class="kr">type</span><span class="p"> </span><span class="n">Arr_2D</span> <span class="kr">is</span><span class="p"> </span><span class="kr">array</span><span class="p"> </span><span class="o">(</span><span class="mi">1</span> <span class="o">..</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span> <span class="o">..</span> <span class="mi">3</span><span class="o">)</span> <span class="kr">of</span><span class="p"> </span><span class="n">Integer</span><span class="p">;</span>

   <span class="kr">type</span><span class="p"> </span><span class="n">Nested_Rec</span> <span class="kr">is</span><span class="p"> </span><span class="kr">record</span><span class="p"></span>
      <span class="n">A</span> <span class="o">:</span> <span class="n">Integer</span><span class="p">;</span>
      <span class="n">B</span> <span class="o">:</span> <span class="n">Rec</span><span class="p">;</span>
      <span class="n">C</span> <span class="o">:</span> <span class="n">Arr</span><span class="p">;</span>
      <span class="n">D</span> <span class="o">:</span> <span class="n">Arr_2D</span><span class="p">;</span>
   <span class="k">end record</span><span class="p">;</span>

   <span class="kr">type</span><span class="p"> </span><span class="n">Nested_Arr</span> <span class="kr">is</span><span class="p"> </span><span class="kr">array</span><span class="p"> </span><span class="o">(</span><span class="mi">1</span> <span class="o">..</span> <span class="mi">3</span><span class="o">)</span> <span class="kr">of</span><span class="p"> </span><span class="n">Nested_Rec</span><span class="p">;</span>

   <span class="c">-- Simple record update</span>
   <span class="k">procedure </span><span class="nf">P1</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kr">in</span><span class="p"> </span><span class="kr">out</span><span class="p"> </span><span class="n">Rec</span><span class="o">)</span>
     <span class="kr">with</span><span class="p"> </span><span class="n">Post</span> <span class="o">=&gt;</span> <span class="n">R</span> <span class="o">=</span> <span class="n">R</span><span class="na">&#39;Old&#39;Update</span> <span class="o">(</span><span class="n">X</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="o">)</span><span class="p">;</span>
   <span class="c">-- this is equivalent to:</span>
   <span class="c">--   R = (X =&gt; 1,</span>
   <span class="c">--        Y =&gt; R&#39;Old.Y)</span>

   <span class="c">-- Simple 1D array update</span>
   <span class="k">procedure </span><span class="nf">P2</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kr">in</span><span class="p"> </span><span class="kr">out</span><span class="p"> </span><span class="n">Arr</span><span class="o">)</span>
     <span class="kr">with</span><span class="p"> </span><span class="n">Post</span> <span class="o">=&gt;</span> <span class="n">A</span> <span class="o">=</span> <span class="n">A</span><span class="na">&#39;Old&#39;Update</span> <span class="o">(</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="o">)</span><span class="p">;</span>
   <span class="c">-- this is equivalent to:</span>
   <span class="c">--   A = (1 =&gt; 2,</span>
   <span class="c">--        2 =&gt; A&#39;Old (2),</span>
   <span class="c">--        3 =&gt; A&#39;Old (3));</span>

   <span class="c">-- 2D array update</span>
   <span class="k">procedure </span><span class="nf">P3</span> <span class="o">(</span><span class="n">A2D</span> <span class="o">:</span> <span class="kr">in</span><span class="p"> </span><span class="kr">out</span><span class="p"> </span><span class="n">Arr_2D</span><span class="o">)</span>
     <span class="kr">with</span><span class="p"> </span><span class="n">Post</span> <span class="o">=&gt;</span> <span class="n">A2D</span> <span class="o">=</span> <span class="n">A2D</span><span class="na">&#39;Old&#39;Update</span> <span class="o">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                                        <span class="o">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
                                        <span class="o">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="o">)</span><span class="p">;</span>
   <span class="c">-- this is equivalent to:</span>
   <span class="c">--   A2D = (1 =&gt; (1 =&gt; 1,</span>
   <span class="c">--                2 =&gt; A2D&#39;Old (1, 2),</span>
   <span class="c">--                3 =&gt; A2D&#39;Old (1, 3)),</span>
   <span class="c">--          2 =&gt; (2 =&gt; 2,</span>
   <span class="c">--                1 =&gt; A2D&#39;Old (2, 1),</span>
   <span class="c">--                3 =&gt; A2D&#39;Old (2, 3)),</span>
   <span class="c">--          3 =&gt; (3 =&gt; 3,</span>
   <span class="c">--                1 =&gt; A2D&#39;Old (3, 1),</span>
   <span class="c">--                2 =&gt; A2D&#39;Old (3, 2)));</span>

   <span class="c">-- Nested record update</span>
   <span class="k">procedure </span><span class="nf">P4</span> <span class="o">(</span><span class="n">NR</span> <span class="o">:</span> <span class="kr">in</span><span class="p"> </span><span class="kr">out</span><span class="p"> </span><span class="n">Nested_Rec</span><span class="o">)</span>
     <span class="kr">with</span><span class="p"> </span><span class="n">Post</span> <span class="o">=&gt;</span> <span class="n">NR</span> <span class="o">=</span> <span class="n">NR</span><span class="na">&#39;Old&#39;Update</span> <span class="o">(</span><span class="n">A</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                                      <span class="n">B</span> <span class="o">=&gt;</span> <span class="n">NR</span><span class="na">&#39;Old</span><span class="o">.</span><span class="n">B</span><span class="na">&#39;Update</span> <span class="o">(</span><span class="n">X</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="o">)</span><span class="p">,</span>
                                      <span class="n">C</span> <span class="o">=&gt;</span> <span class="n">NR</span><span class="na">&#39;Old</span><span class="o">.</span><span class="n">C</span><span class="na">&#39;Update</span> <span class="o">(</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="o">))</span><span class="p">;</span>
   <span class="c">-- this is equivalent to:</span>
   <span class="c">--   NR = (A =&gt; 1,</span>
   <span class="c">--         B.X =&gt; 1,</span>
   <span class="c">--         B.Y =&gt; NR&#39;Old.B.Y,</span>
   <span class="c">--         C (1) =&gt; 5,</span>
   <span class="c">--         C (2) =&gt; NR&#39;Old.C (2),</span>
   <span class="c">--         C (3) =&gt; NR&#39;Old.C (3),</span>
   <span class="c">--         D =&gt; NR&#39;Old.D)</span>

   <span class="c">-- Nested array update</span>
   <span class="k">procedure </span><span class="nf">P5</span> <span class="o">(</span><span class="n">NA</span> <span class="o">:</span> <span class="kr">in</span><span class="p"> </span><span class="kr">out</span><span class="p"> </span><span class="n">Nested_Arr</span><span class="o">)</span>
     <span class="kr">with</span><span class="p"> </span><span class="n">Post</span> <span class="o">=&gt;</span>
       <span class="n">NA</span> <span class="o">=</span> <span class="n">NA</span><span class="na">&#39;Old&#39;Update</span> <span class="o">(</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="n">NA</span><span class="na">&#39;Old</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span><span class="na">&#39;Update</span>
                                  <span class="o">(</span><span class="n">A</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                                   <span class="n">D</span> <span class="o">=&gt;</span> <span class="n">NA</span><span class="na">&#39;Old</span> <span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="n">D</span><span class="na">&#39;Update</span> <span class="o">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="o">))</span><span class="p">,</span>
                           <span class="mi">2</span> <span class="o">=&gt;</span> <span class="n">NA</span><span class="na">&#39;Old</span> <span class="o">(</span><span class="mi">2</span><span class="o">)</span><span class="na">&#39;Update</span>
                                  <span class="o">(</span><span class="n">B</span> <span class="o">=&gt;</span> <span class="n">NA</span><span class="na">&#39;Old</span> <span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="n">B</span><span class="na">&#39;Update</span> <span class="o">(</span><span class="n">X</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="o">))</span><span class="p">,</span>
                           <span class="mi">3</span> <span class="o">=&gt;</span> <span class="n">NA</span><span class="na">&#39;Old</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span><span class="na">&#39;Update</span>
                                  <span class="o">(</span><span class="n">C</span> <span class="o">=&gt;</span> <span class="n">NA</span><span class="na">&#39;Old</span> <span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="n">C</span><span class="na">&#39;Update</span> <span class="o">(</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="o">)))</span><span class="p">;</span>
   <span class="c">-- this is equivalent to:</span>
   <span class="c">--   NA = (1 =&gt; (A =&gt; 1,</span>
   <span class="c">--               B =&gt; NA&#39;Old (1).B,</span>
   <span class="c">--               C =&gt; NA&#39;Old (1).C,</span>
   <span class="c">--               D =&gt; NA&#39;Old (1).D),</span>
   <span class="c">--         2 =&gt; (B.X =&gt; 2,</span>
   <span class="c">--               B.Y =&gt; NA&#39;Old (2).B.Y,</span>
   <span class="c">--               A =&gt; NA&#39;Old (2).A,</span>
   <span class="c">--               C =&gt; NA&#39;Old (2).C,</span>
   <span class="c">--               D =&gt; NA&#39;Old (2).D),</span>
   <span class="c">--         3 =&gt; (C =&gt; (1 =&gt; 5,</span>
   <span class="c">--                     2 =&gt; NA&#39;Old (3).C (2),</span>
   <span class="c">--                     3 =&gt; NA&#39;Old (3).C (3)),</span>
   <span class="c">--               A =&gt; NA&#39;Old (3).A,</span>
   <span class="c">--               B =&gt; NA&#39;Old (3).B,</span>
   <span class="c">--               D =&gt; NA&#39;Old (3).D));</span>

<span class="k">end </span><span class="nf">Update_Examples</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="operators-and-expression-evaluation">
<h2>4.5. Operators and Expression Evaluation<a class="headerlink" href="#operators-and-expression-evaluation" title="Permalink to this headline">¶</a></h2>
<p>Ada grants implementations the freedom to reassociate a sequence
of predefined operators of the same precedence level even if this
changes the behavior of the program with respect to intermediate
overflow (see Ada 2012 RM 4.5). SPARK 2014 assumes that an implementation
does not take advantage of this permission; in particular,
a proof of the absence of intermediate overflow in this situation
may depend on this assumption.</p>
<p>A SPARK 2014 tool is permitted to provide a warning where operators may
be re-associated by a compiler.</p>
<p>[The GNAT Ada 2012 compiler does not take advantage of this permission.
The GNAT compiler also provides an option for rejecting constructs to
which this permission would apply. Explicit parenthesization can
always be used to force a particular association in this situation.]</p>
</div>
<div class="section" id="type-conversions">
<h2>4.6. Type Conversions<a class="headerlink" href="#type-conversions" title="Permalink to this headline">¶</a></h2>
<p>No extensions or restrictions.</p>
</div>
<div class="section" id="qualified-expressions">
<h2>4.7. Qualified Expressions<a class="headerlink" href="#qualified-expressions" title="Permalink to this headline">¶</a></h2>
<p>No extensions or restrictions.</p>
</div>
<div class="section" id="allocators">
<h2>4.8. Allocators<a class="headerlink" href="#allocators" title="Permalink to this headline">¶</a></h2>
<p class="centered">
<strong><strong>Legality Rules</strong></strong></p><ol class="arabic simple" id="tu-allocators-01">
<li>The designated type of the type of an uninitialized allocator
shall define full default initialization.</li>
</ol>
<ol class="arabic simple" id="tu-allocators-02" start="2">
<li>Evaluation of an allocator is subject to the same restrictions as calling a
volatile function (e.g., an allocator is not allowed within a non-volatile
function). [If it seems helpful, an allocator may be thought of as being
like a call to a volatile function which returns the access value
designating the allocated object.]</li>
</ol>
<ol class="arabic simple" id="tu-allocators-03" start="3">
<li>The type of an allocator shall not be anonymous.</li>
</ol>
</div>
<div class="section" id="static-expressions-and-static-subtypes">
<span id="etu-allocators"></span><h2>4.9. Static Expressions and Static Subtypes<a class="headerlink" href="#static-expressions-and-static-subtypes" title="Permalink to this headline">¶</a></h2>
<p>No extensions or restrictions.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="statements.html" title="5. Statements"
             >next</a> |</li>
        <li class="right" >
          <a href="declarations-and-types.html" title="3. Declarations and Types"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SPARK 2014 Reference Manual 2019</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013-2019, AdaCore and Altran UK Ltd.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
  </body>
</html>